# Unity 超ミニMVPブリーフ — 戦闘だけ / まず動く版（UI最小・演出不要）

あなたは **Unity 上級エンジニア**。以下の最小要件だけで **動く戦闘MVP** を Unity 2022.3 LTS / Built-in で実装してください。
目的：見た目や気持ちよさの演出は後回し。**まず動く**こと。**エラーなし・即プレイ可能**。
タクティクスRPGみたいなのを作りたい。

---

## 0) 環境・制約
- Unity **2022.3 LTS** / 2D / Built-in。追加パッケージなし（Tilemap不要、旧Input可）。
- シーン再生で即プレイ。**メニューなし**。
- アートは**色付き四角**でOK。**アニメ・エフェクト一切不要**。
- UIは **Text + Button** だけ。フォント/装飾不要。

---

## 1) コア仕様（最小）
- 盤面：**8×8** グリッド（全マス通行可）。
- ユニット：**味方1体**（青）・**敵1体**（赤）。
- ターン：**味方 → 敵** の交互。
- 行動：味方は「移動 or 攻撃 or アイテム or 待機」から**1つ**選んで終了。敵は自動で「接近→攻撃」。
- 勝利：敵撃破 → 画面中央に **Victory** と **[Restart]** ボタン。
- 敗北：味方撃破 → **Defeat** と **[Restart]** ボタン。

※ 今回は **命中/クリ/追撃なし**。まずは**確実ヒット**とする。

---

## 2) ステータス & 計算（シンプル）
- ステ：**HP / 攻撃 / 防御 / 移動力 / 射程**
- **ダメージ** = `max(1, 攻撃 − 相手防御)` のみ（命中・クリなし）
- 距離：**マンハッタン距離**（上下左右のみ）
- 射程：両者 **1**（隣接で攻撃）
- 移動：味方5 / 敵4（任意）

### 最小データ（固定値でハードコード可）
- 味方（ソードファイター）：`HP=20, 攻=8, 防=3, 移動=5, 射程=1`
- 敵（槍兵）　　　　　：`HP=22, 攻=9, 防=4, 移動=4, 射程=1`
- アイテム（回復薬）　：`HP+10 / 使用1回 / 上限超え不可`

---

## 3) UI（最低限のみ）
- **上部テキスト**：`Turn: X | Objective: Defeat Enemy | Enemy Left: 1`
- **中央**：8×8 グリッド（単色の四角）。ユニットは色違いの四角。
- **下部**：
  - ステ表示：`Ally HP 20/20  ATK 8  DEF 3`
  - ボタン：**[Move] [Attack] [Item] [Wait] [End Turn]**
- 結果画面：**Victory/Defeat** と **[Restart]** ボタンのみ。

※ ハイライトやログ不要。クリックで座標選択するだけでOK。

---

## 4) 入力
- マウスクリック：マス/敵選択。
- キー操作不要（あっても可）。**[Restart]** でシーン再読み込み。

---

## 5) 敵AI（最小）
1. 射程1に味方がいれば **攻撃**。
2. いなければ **最短になるように1歩だけ接近**（4方向、BFSでなくても「距離が縮む方向に1歩」でOK）。
3. 行動終了。

---

## 6) スクリプト構成（最小でOK）
- `BattleEntry.cs`：初期化（グリッド生成・ユニット配置）
- `GridController.cs`：8×8座標管理、クリック座標→グリッド変換
- `Unit.cs`：座標・HP・攻撃・防御・移動・射程・生死
- `TurnManager.cs`：味方/敵ターン切替、行動済み制御、勝敗判定
- `EnemyAI.cs`：上記の単純AI
- `ActionPanel.cs`：Move/Attack/Item/Wait/End Turn の制御
- `ResultPanel.cs`：Victory/Defeat + Restart（シーン再読み込み）

> データはスクリプト内の**定数で可**。Prefab化・ScriptableObjectは不要。

---

## 7) フロー（味方側）
- **Move**：Move中はクリックしたマスへワープで可（経路アニメ不要）。到達可能判定のみ。
- **Attack**：隣接の敵をクリック → 即ダメージ → HP0なら撃破。
- **Item**：回復薬があれば即時HP+10（使用回数0ならボタンを**非活性**）。
- **Wait/End Turn**：行動終了 → 敵ターン開始。

---

## 8) 受け入れ条件（Done）
- [ ] シーン再生で**即プレイ可能**（メニュー不要）
- [ ] 味方が **Move/Attack/Item/Wait** を実行できる
- [ ] ダメージ計算が期待通り（`max(1, atk - def)`）
- [ ] 敵が**接近→攻撃**を自動で行う
- [ ] 味方/敵いずれかのHPが0で**Victory/Defeat**を表示
- [ ] **[Restart]** でシーンを最初からやり直せる
- [ ] **コンパイルエラーなし**（警告は可能な限りゼロ）

---

## 9) 実装順序（作業手順）
1) グリッド生成（8×8）→ ユニット2体の初期配置
2) Unit/Stats 作成 → HP/Atk/Def だけ反映
3) Move（到達可能チェック→ワープ移動でOK）
4) Attack（隣接チェック→ダメージ→死亡時非表示）
5) TurnManager（味方→敵の交互）
6) 敵AI（距離詰め1歩→攻撃）
7) Item（回復薬1回）
8) 勝敗と Restart

---

## 10) 成果物
- `Assets/Scenes/Battle.unity`（再生で即プレイ）
- `Assets/Scripts/*.cs` 一式
- `README_MVP.txt`（操作説明：ボタンの意味と勝敗条件）

**注意：** 演出（ヒットストップ・ポップ・ハイライト・ログ）は一切不要。
**まずは動くこと。** バグ取りと操作導線の成立を最優先にしてください。
